<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>QLGlicko - Quake Live ranking for the masses</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
    
    <link href="/static/css/sb-admin.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/font-awesome/css/font-awesome.min.css">
  </head>
  <body>
    <div id="wrapper">
    
      <!-- Sidebar -->
      <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html">QLGlicko</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse navbar-ex1-collapse">
          <ul class="nav navbar-nav side-nav">
              <li class="active"><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
              <li><a href="#rank-players">Rank Players</a></li>
              <li><a href="#about">About</a></li>
              <li><a href="#faq">FAQ</a></li>
              <li><a href="#api">Api</a></li>
              <li><a href="#contact">Contact</a></li>
          </ul>
        </div><!-- /.navbar-collapse -->
      </nav>
    <div id="page-wrapper">
    <div class="container">
	<div class="starter-template">
		<h1>Quake Live Glicko 2 ranking stats</h1>
		<p class="lead">Look up rankings of players on different maps and see how well they are performing.</p>
	</div>
	<!-- Download
          ================================================== -->
        <section id="rank-players">
          <div class="page-header">
            <h1>Rank Players</h1>
          </div>
          <p>Currently, the player ranker is rather strict at what it accepts. You can ignore capitalization, but beware of players using characters that look like other characters, like the 1 (one) in "k1llsen" for instance.</p>

<div class="row">
<div class="col-lg-6" >
<form role="form" id="player-form" style="display:none">
  <div class="form-group">
    <label for="player_to_add">Player</label>
    <input type="text" class="form-control" id="player_to_add" placeholder="rapha">
  </div>
  <button type="submit" class="btn btn-default">Submit</button>
</form>
</div>
</div>
<h1>Maps:</h1>
<div id="maps">
</div>
<div class="template-map" style="display:none">
<div class="row">
          <div class="col-lg-12">
            <div class="panel panel-primary">
              <div class="panel-heading">
                <h3 class="panel-title"><i class="fa fa-bar-chart-o"></i> <span class="map-header"></span></h3>
              </div>
              <div class="panel-body">
	   <div class="table-responsive">
              <table class="table table-bordered table-hover tablesorter">
                <thead>
                  <tr>
    <td>Player Name</td>
    <td>Rank</td>
    <td>Rank Development</td>
    <td>Summary</td>
    <td>Match Streak</td>
                  </tr>
                </thead>
                <tbody class="players">
                </tbody>
              </table>
            </div>
              </div>
            </div>
          </div>
</div><!-- /.row -->
</div>
<table style="display:none">
<tr class="template-player" style="display:none">
<td class="name"></td>
<td class="rank"></td>
<td><span class="development"></span></td>
<td><span class="sparkline"></span></td>
<td><span class="streak"></span></td>
</tr>
</table>
        </section>
        <section id="about">
          <div class="page-header">
            <h1>About</h1>
          </div>
          <p class="lead">About the project</p>
          <p>This project is tracking Quake Live duel matches for players and ranking each player on the Glicko 2 scale. Fetching of a player is done once a week and ranking also updates once a week since each week is regarded as a "tournament". Note that this removes smaller fluctuations in ranking over time since the player is smoothed with more matches.</p>
          <p>The strength of this system is that it should predict better than ELO when evaluating the power of a player. Also, a difference is we are ranking players individually on maps to account for the fact that some players are better on certain maps than others.</p>
        </section>
        <section id="faq">
          <div class="page-header">
            <h1>FAQ</h1>
          </div>
          <dl>
            <dt>How is the ranking done</dt>
            <dd>Matches you play are eventually scanned by the crawler. It is pretty slow since it does not want to overload the QL site. When the matches have been crawled, all matches less than a minute is filtered out. The reason is that we are trying to guage skill levels of players and not even trying doesn't count. Then the matches are entered into the Glicko 2 ranking system for updating the <em>Rank</em> and the <em>Rank Deviation</em>. The first number is the current skill level and the second tracks the confidence in that skill level by the system. We box-plot the latter so a player may have some idea of where he or she are, ranking-wise. There is also an internal parameter called the <i>volatility</i> of a player. This parameter is there to account for players who suddenly increase a lot in their skill and thus fools the ranking system. In that case the volatility of the player goes up, ensuring the player will change ranking a bit faster to account for his or her newfound skill.</dd>
            <dt>When did you start collecting data?</dt>
            <dd>Data collection started from the 1st of February 2012. I may have missed a couple of early matches around that point in time.</dd>
            <dt>What are the initial configuration values for Glicko 2?</dt>
            <dd>Starting rank r = 1500, the initial rank deviation is 231, the σ value is 0.06 and τ = 0.73. These values have been found by tuning the system for the best prediction. Prediction is run on 99 weeks of data. 93 weeks are collected normally and we predict on 94-96. The rounds 97-99 are used to filter down to the players who were recently active. The optimization function used is Nelder-Mead.</dt>
            <dt>Isn't the barplots the wrong plot to use for the ranking?</dt>
            <dd>Somewhat. The red line, called the target, is the current rank. The blue line points to the conservative low estimate of the player. Playing more will make the estimate get closer to the target. The background encodes intervals to mark roughly where certain point scores are. From highest to lowest they are 2600, 2400, 2000. The far right is 2600 points.</dd>
            <dt>What is this "Match Streak" thing?</dt>
            <dd>The system looks up the last 150 matches by the player and reports how the player fared on those matches. This means that if a player mostly plays Bloodrun/ztn, the list will be longer for that map. It gives a great visual overview of what maps the player has played recently.</dd>
            <dt>What tools are used for this site?</dt>
            <dd>The front-end is written in a combination of jQuery,
            the jQuery sparkline plugin and the bootstrap.js
            framework, originally by Twitter. The backend is written
            in the programming language Erlang by Ericsson and uses
            the Cowboy web server to serve requests. Calculations for ranking and optimization is currently done in Go. Data storage is
            handled by the Postgres database, which is a beast. To
            spice up response times, there is a varnish cache in front
            of the web page improving speed even more.</dd>
            <dt>Your page looks like crap!</dt>
            <dd>I am sorry. You should be able to present a nicer layout yourself, so grab your text editor and then get to hacking the layout and look of the site. This is just to get up and running quickly.</dd>
            <dt>What is the affiliation to the QLRanks site?</dt>
            <dd>We are not connected in any way. I respect the work done by QLRanks which is awesome. Their match data is more online which means they have results faster and they know a lot more about what is happening <em>right now</em> on Quake Live. QLGlicko is more interested in long-term rankings of players and as such uses a more advanced and computationally intensive algorithm. QLGlicko is always lagging behind current performance by some margin. Usually about 1 to 1.5 weeks. Another point is we rank per map, whereas QLRanks is ranking players with an overall score.</dd>
            <dt>Can't you rank TDM or CTF also?</dt>
            <dd>Glicko 2 is explicitly a 1v1 ranking system. It is not possible to adopt it to a multiplayer situation. We would need to employ a different ranking system.</dd>
            <dt>How about CA then?</dt>
            <dd>CA is not a competitive mode, so go to hell. Only mad frenchmen like H3artless plays it. More seriously though, the problem with CA is the same as with TDM and CTF. We need another ranking system for those.</dd>
            <dt>HoN, LoL or DOTA 2?</dt>
            <dd>DOTA 2 of course! The other games are boring to watch</dd>
            <dt>SC2, WoW or D3?</dt>
            <dd>D2, naturally. Or Titan Quest. Or Path of Exile.</dd>
            <dt>What do you feel about Shootmania?</dt>
            <dd>Like everyone else I fall asleep when I watch it. I'd much rather hack code on this site than looking at Shootmania.</dd>
            <dt>What about CPMA then?</dt>
            <dd>CPMA is awesome!</dd>
            <dt>My question is not answered!</dt>
            <dd>Oh, the horror! If you feel it is a good question, contact me</dd>
          </dl>
        </section>
        <section id="api">
          <div class="page-header">
            <h1>Api</h1>
          </div>
          <p>This page is driven by a REST Api built the traditional
          way. If you are cautious, you may use it in an application
          of your own, but please mind the rate at which you query.
          While the site can handle a lot, there are limits to how
          much it can handle.</p>
          <ul>
            <li>GET /player/:playername:<pre>
$ curl http://qlglicko.net/player/rapha
{
  "aerowalk": {
    "rank": [
      {
        "rank": 1792.1416553268268,
        "rank_deviation": 289.25629342270895
      },
      {
        "rank": 1792.1416553268268,
        "rank_deviation": 289.2563044855622
      },
...        
            </pre></li>
          </ul>
        </section>

        <section id="contact">
          <div class="page-header">
            <h1>Contact</h1>
          </div>
          <p>Code is written by Jesper Louis Andersen: jesper.louis.andersen@gmail.com</p>
        </section>
    </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript" src="/static/js/jquery.sparkline.min.js"></script>
    <script src="/static/js/qlglicko.js"></script>
    <script type="text/javascript">
      $(document).ready(function() {
        $('#player-form').submit(function(event) {
             event.preventDefault();
    	    var p = $('#player_to_add')[0].value;
    	    get_and_add_player(p);
    	    var txt = $('#player_to_add');
    	    txt.focus();
    	    txt.select();
    	    false;
        });
        $('#player-form').show();
        $('#player_to_add').focus();
        
      });
    </script>
    <script src="/static/js/bootstrap.min.js"></script>
  </body>
</html>
